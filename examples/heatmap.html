<!DOCTYPE html>
<html lang="en">
<head>

</head>

<body>
    <h2>demo glsl heatmap</h2>
    <pre>
demo feature notes
- click and drag to zoom
- double click to reset zoom
- click on plot to create polygon gate vertex 
(see polycallback to do something with these besides draw)
- figure is 8192x8192 sparse histogram with 1M random points
    </pre>

    <div style="display:inline-block" id="heatmaptarget"></div>
    <div style="display:inline-block; vertical-align: top;" id="controltarget"></div>

    <script type="module">
        import { heatmap } from '../scripts/heatmap.js';
        const hm = new heatmap("heatmaptarget", "controltarget", {
            polycallback: (polycoords)=>console.log(polycoords),
            plotTitle: 'Demo Heatmap',
            xAxisTitle: 'demo x axis',
            yAxisTitle: 'demo y axis',
            scale: 'linear',
            bkgColor: '#333333',
            textColor: '#ffffff',
            annotationColor: '#ffffff',
            width: window.innerWidth * 0.7,
            height: window.innerHeight * 0.7
        });

        let data = [];
        let dim = 1000
        for (let i=0;i<dim;i++){
            let row = [];
            for (let j=0;j<dim;j++){
                row.push(1000000*Math.random());
                if(i>500 && i<600 && j>500 && j<600){
                    row[j] = 0
                }
            }
            data.push(row);
        }

        // let data = {
        //     xBins: 8192,
        //     yBins: 8192,
        //     x: [],
        //     y: [],
        //     z: []
        // }
        // for (let i = 0; i < 1000000; i++) {
        //     data.x.push(Math.floor(Math.random() * 8192));
        //     data.y.push(Math.floor(Math.random() * 8192));
        //     data.z.push(Math.random());
        // }

        hm.draw(data)

      </script>
</body>
